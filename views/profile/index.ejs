<div class="p-3 md:p-4">
    <div class="flex flex-col lg:flex-row gap-4 lg:gap-6 max-w-[1100px]">
        <!-- Mobile Sidebar Toggle -->
        <button id="sidebar-toggle" class="lg:hidden flex items-center justify-between px-4 py-2 bg-white border border-gray-200 rounded shadow-sm text-sm">
            <span><i class="fas fa-bars mr-2"></i>Menu</span>
        </button>

        <!-- Sidebar -->
        <div id="sidebar" class="hidden lg:block lg:w-52 shrink-0">
            <%- include('../components/settings_sidebar', { activeSettingsPage }) %>
        </div>

        <div class="flex-1 min-w-0">
            <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 mb-4">
                <h1 class="text-xl md:text-2xl font-semibold">Profiles</h1>
                <a href="/profiles/new" class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded text-sm w-full sm:w-auto text-center">
                    <i class="fas fa-plus mr-1"></i> New Profile
                </a>
            </div>

            <% if (profiles.length === 0) { %>
                <div class="bg-white border border-gray-200 rounded p-6 md:p-8 text-center text-gray-400">
                    <i class="fas fa-circle-user text-4xl mb-3"></i>
                    <p>No profiles configured yet.</p>
                    <a href="/profiles/new" class="text-blue-600 hover:underline">Create your first profile</a>
                </div>
            <% } else { %>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                    <% profiles.forEach(function(profile) { %>
                        <a href="/profiles/<%= profile.id %>" class="bg-white border border-gray-200 rounded hover:border-blue-300 hover:shadow-sm transition-colors block">
                            <div class="p-4">
                                <div class="flex items-center gap-3 mb-3">
                                    <div class="w-10 h-10 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center font-medium shrink-0">
                                        <%= profile.name.charAt(0).toUpperCase() %>
                                    </div>
                                    <div class="min-w-0">
                                        <div class="font-medium truncate"><%= profile.name %></div>
                                        <span class="px-2 py-0.5 bg-gray-100 rounded text-xs text-gray-600"><%= profile.exchange %></span>
                                    </div>
                                </div>
                                <div class="text-xs text-gray-400">
                                    <% if (profile.apiKey) { %>
                                        <i class="fas fa-key text-green-500 mr-1"></i> API configured
                                    <% } else { %>
                                        <i class="fas fa-circle-exclamation text-yellow-500 mr-1"></i> No API key
                                    <% } %>
                                </div>
                            </div>
                        </a>
                    <%}); %>
                </div>
            <% } %>
        </div>
    </div>
</div>

<script>
document.getElementById('sidebar-toggle')?.addEventListener('click', function() {
    document.getElementById('sidebar').classList.toggle('hidden');
});
</script>

            <% if (profiles.length === 0) { %>
                <div class="bg-white border border-gray-200 rounded p-8 text-center text-gray-400">
                    <i class="fas fa-circle-user text-4xl mb-3"></i>
                    <p>No profiles configured yet.</p>
                    <a href="/profiles/new" class="text-blue-600 hover:underline">Create your first profile</a>
                </div>
            <% } else { %>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <% profiles.forEach(function(profile) { %>
                        <a href="/profiles/<%= profile.id %>" class="bg-white border border-gray-200 rounded hover:border-blue-300 hover:shadow-sm transition-colors block">
                            <div class="p-4">
                                <div class="flex items-center gap-3 mb-3">
                                    <div class="w-10 h-10 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center font-medium">
                                        <%= profile.name.charAt(0).toUpperCase() %>
                                    </div>
                                    <div>
                                        <div class="font-medium"><%= profile.name %></div>
                                        <span class="px-2 py-0.5 bg-gray-100 rounded text-xs text-gray-600"><%= profile.exchange %></span>
                                    </div>
                                </div>
                                <div class="text-xs text-gray-400">
                                    <% if (profile.apiKey) { %>
                                        <i class="fas fa-key text-green-500 mr-1"></i> API configured
                                    <% } else { %>
                                        <i class="fas fa-circle-exclamation text-yellow-500 mr-1"></i> No API key
                                    <% } %>
                                </div>
                            </div>
                        </a>
                    <% }); %>
                </div>
            <% } %>
        </div>
    </div>
</div>
